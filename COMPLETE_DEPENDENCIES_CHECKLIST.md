# Complete Dependencies Checklist for Project Handoff

This document lists **everything** needed to deploy and run this project at a new company.

---

## ðŸ”´ CRITICAL - Required for Basic Functionality

### 1. Google Drive Setup (REQUIRED)
**Purpose:** Uploads generated PDF slides to Google Drive (for DocSend integration)

**What you need:**
- [ ] **Google Cloud Project** (create at https://console.cloud.google.com/)
- [ ] Google Drive API enabled in the project
- [ ] OAuth 2.0 Credentials (Desktop app type)
  - Download as `credentials.json`
  - OR provide as JSON string in environment variable
- [ ] OAuth Token (generated by running `setup_google_oauth.py`)
  - Saved as `token.json` locally
  - OR provide as JSON string in `GOOGLE_DRIVE_CREDENTIALS_JSON`

**Environment Variables:**
```bash
# Option 1: Use credentials.json + token.json files (local)
# (No env var needed if files are in project root)

# Option 2: Use JSON string (for Railway/Render)
GOOGLE_DRIVE_CREDENTIALS_JSON='{"type":"service_account",...}'

# Optional: Target folder
GOOGLE_DRIVE_FOLDER_ID=your_folder_id_here

# Optional: Target file (for DocSend)
GOOGLE_DRIVE_STATIC_FILE_NAME=SlidesGen.pdf
# OR
GOOGLE_DRIVE_STATIC_FILE_ID=your_file_id_here
```

**Setup Steps:**
1. Create Google Cloud project
2. Enable Google Drive API
3. Create OAuth 2.0 credentials (Desktop app)
4. Download `credentials.json`
5. Run `python setup_google_oauth.py` to generate `token.json`
6. For production: Set `GOOGLE_DRIVE_CREDENTIALS_JSON` environment variable

---

### 2. Slide Template File (REQUIRED)
**Purpose:** Base template for generating portfolio slides

**What you need:**
- [ ] **PDF Template File** (`SLAUSON&CO.Template.pdf`)
  - Must be in the repository OR accessible path
  - Contains the slide design/layout

**Environment Variables:**
```bash
SLIDE_TEMPLATE_PATH=/path/to/SLAUSON&CO.Template.pdf
# OR place file in project root (auto-detected)
```

**File Location:**
- Should be committed to repository at: `SLAUSON&CO.Template.pdf`
- OR set `SLIDE_TEMPLATE_PATH` to absolute path

---

### 3. Python Environment (REQUIRED)
**Purpose:** Run the application

**What you need:**
- [ ] **Python 3.11** (or 3.8+)
- [ ] **All packages from `requirements.txt`**
- [ ] **System dependencies:**
  - `poppler-utils` (for PDF processing)
  - Build tools (gcc, meson, ninja) - for Railway

**Installation:**
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

## ðŸŸ¡ IMPORTANT - Recommended for Full Functionality

### 4. Google Gemini API Key (HIGHLY RECOMMENDED)
**Purpose:** 
- Generate map placeholders for slides
- Process headshots (background removal fallback)

**What you need:**
- [ ] **Gemini API Key** from https://aistudio.google.com/apikey
- [ ] Free tier available (no credit card needed)

**Environment Variables:**
```bash
GEMINI_API_KEY=AIzaSy...
```

**Setup Steps:**
1. Go to https://aistudio.google.com/apikey
2. Sign in with Google account
3. Click "Create API Key"
4. Copy the key
5. Add to environment variables

**What breaks without it:**
- Map generation will fail (uses placeholder)
- Headshot processing fallback won't work
- Slide generation will still work but with limited features

---

### 5. Canva Integration (OPTIONAL but Recommended)
**Purpose:** Upload slides to Canva design

**What you need:**
- [ ] **Canva Developer Account** (may require Canva Pro/Enterprise)
- [ ] **Canva OAuth App** created at https://www.canva.com/developers/
- [ ] **Client ID** and **Client Secret**
- [ ] **Template Design ID** (if using Canva templates)
- [ ] **OAuth Tokens** (generated by running `setup_canva_oauth.py`)

**Environment Variables:**
```bash
CANVA_CLIENT_ID=OC-...
CANVA_CLIENT_SECRET=your_secret
CANVA_TEMPLATE_ID=DAG... (optional)
CANVA_STATIC_DESIGN_ID=DAG... (optional, for appending)

# For production (Railway/Render):
CANVA_REFRESH_TOKEN=your_refresh_token
CANVA_ACCESS_TOKEN=your_access_token
CANVA_TOKEN_REFRESHED_AT=1234567890
```

**Setup Steps:**
1. Create Canva developer account
2. Create OAuth app
3. Get Client ID and Secret
4. Run `python setup_canva_oauth.py`
5. Copy tokens from `canva_tokens.json` to environment variables

**What breaks without it:**
- Canva upload will be skipped
- Slides will only go to Google Drive
- Still fully functional otherwise

---

## ðŸŸ¢ OPTIONAL - Nice to Have

### 6. Background Removal APIs (OPTIONAL)
**Purpose:** Better quality headshot background removal

#### 6a. Remove.bg API (OPTIONAL)
**What you need:**
- [ ] **Remove.bg API Key** from https://www.remove.bg/api
- [ ] Free tier: 50 images/month

**Environment Variables:**
```bash
REMOVEBG_API_KEY=your_key_here
```

**What happens without it:**
- Falls back to local `rembg` ML model
- Still works, just slightly lower quality

#### 6b. OpenAI API (OPTIONAL)
**Purpose:** Backup background removal method

**What you need:**
- [ ] **OpenAI API Key** from https://platform.openai.com/api-keys
- [ ] Requires paid account

**Environment Variables:**
```bash
OPENAI_API_KEY=sk-proj-...
```

**What happens without it:**
- Falls back to `rembg` or `remove.bg`
- Not critical

---

### 7. Notion Integration (OPTIONAL)
**Purpose:** Automatically create Notion pages for portfolio companies

**What you need:**
- [ ] **Notion API Key** from https://www.notion.so/my-integrations
- [ ] **Notion Database ID** (where companies are stored)
- [ ] **Notion Template Page ID** (optional, for page templates)

**Environment Variables:**
```bash
NOTION_API_KEY=secret_...
NOTION_DATABASE_ID=your_database_id
NOTION_TEMPLATE_PAGE_ID=your_template_id (optional)
```

**What happens without it:**
- Notion integration is skipped
- Slides still generate and upload to Google Drive
- Fully functional otherwise

---

### 8. DocSend Integration (OPTIONAL)
**Purpose:** Automatically update DocSend presentations

**What you need:**
- [ ] **DocSend API Key** (contact DocSend for API access)
- [ ] **DocSend Deck IDs**

**Environment Variables:**
```bash
DOCSEND_API_KEY=your_key
DOCSEND_INDIVIDUAL_DECK_ID=your_id
DOCSEND_MASTER_DECK_ID=your_id
```

**What happens without it:**
- DocSend integration is skipped
- Slides still upload to Google Drive
- You can manually sync from Google Drive to DocSend

---

## ðŸ“¦ File Dependencies

### Required Files in Repository:
- [ ] `SLAUSON&CO.Template.pdf` - Slide template (or set `SLIDE_TEMPLATE_PATH`)
- [ ] `requirements.txt` - Python dependencies
- [ ] `railway.json` or `Procfile` - Deployment config
- [ ] `nixpacks.toml` - Build configuration (for Railway)
- [ ] `runtime.txt` - Python version (for Railway)

### Optional Files:
- [ ] `assets/map_background.png` - Fallback map image
- [ ] `credentials.json` - Google OAuth (if not using env var)
- [ ] `token.json` - Google OAuth token (if not using env var)
- [ ] `canva_tokens.json` - Canva OAuth tokens (if not using env var)

---

## ðŸš€ Deployment Platform Setup

### For Railway:
- [ ] Railway account created
- [ ] Project connected to GitHub repository
- [ ] All environment variables set in Railway dashboard
- [ ] Build tools configured (via `nixpacks.toml`)

### For Render:
- [ ] Render account created
- [ ] Web service created
- [ ] All environment variables set in Render dashboard
- [ ] Build command: `pip install -r requirements.txt`
- [ ] Start command: `gunicorn webhook_listener:app --bind 0.0.0.0:$PORT --timeout 120 --workers 2`

---

## ðŸ“‹ Complete Environment Variables List

### Copy-Paste Template for .env or Deployment Platform:

```bash
# ============================================
# REQUIRED
# ============================================

# Google Drive (REQUIRED)
GOOGLE_DRIVE_CREDENTIALS_JSON='{"type":"service_account",...}'
# OR use credentials.json + token.json files

GOOGLE_DRIVE_STATIC_FILE_NAME=SlidesGen.pdf
# OR
GOOGLE_DRIVE_STATIC_FILE_ID=your_file_id

# Slide Template (REQUIRED)
SLIDE_TEMPLATE_PATH=/path/to/SLAUSON&CO.Template.pdf
# OR place file in repo root

# ============================================
# HIGHLY RECOMMENDED
# ============================================

# Gemini API (for map generation)
GEMINI_API_KEY=AIzaSy...

# Canva Integration
CANVA_CLIENT_ID=OC-...
CANVA_CLIENT_SECRET=your_secret
CANVA_REFRESH_TOKEN=your_refresh_token
CANVA_ACCESS_TOKEN=your_access_token
CANVA_TOKEN_REFRESHED_AT=1234567890

# ============================================
# OPTIONAL
# ============================================

# Background Removal
REMOVEBG_API_KEY=your_key
OPENAI_API_KEY=sk-proj-...

# Notion
NOTION_API_KEY=secret_...
NOTION_DATABASE_ID=your_id
NOTION_TEMPLATE_PAGE_ID=your_id

# DocSend
DOCSEND_API_KEY=your_key
DOCSEND_INDIVIDUAL_DECK_ID=your_id
DOCSEND_MASTER_DECK_ID=your_id

# ============================================
# DEPLOYMENT SETTINGS
# ============================================

# Performance (for Railway/Render)
NUMBA_DISABLE_JIT=1
OMP_NUM_THREADS=1
CUDA_VISIBLE_DEVICES=""
PYTHON_VERSION=3.11
FLASK_DEBUG=False
PORT=5001  # Railway/Render sets this automatically
```

---

## âœ… Quick Setup Checklist

### Minimum Setup (Basic Functionality):
- [ ] Google Drive OAuth configured
- [ ] Slide template file available
- [ ] Python environment set up
- [ ] Deployed to Railway or Render
- [ ] Basic environment variables set

### Full Setup (All Features):
- [ ] All items from Minimum Setup
- [ ] Gemini API key configured
- [ ] Canva OAuth configured
- [ ] Background removal API keys (optional)
- [ ] Notion integration (optional)
- [ ] DocSend integration (optional)

---

## ðŸ”§ Setup Scripts to Run

1. **Google Drive OAuth:**
   ```bash
   python setup_google_oauth.py
   ```

2. **Canva OAuth:**
   ```bash
   python setup_canva_oauth.py
   ```

3. **Test Everything:**
   ```bash
   python test_astranis_slide.py
   ```

---

## ðŸ“ž Support & Troubleshooting

If something doesn't work:
1. Check environment variables are set correctly
2. Check API keys are valid and have quota
3. Check OAuth tokens haven't expired
4. Check deployment logs for errors
5. Verify all required files are in repository

---

## ðŸ’° Cost Estimates

### Free Tier Available:
- âœ… Google Drive API - Free
- âœ… Gemini API - Free tier (generous)
- âœ… Railway/Render - Free tier available

### Paid Services (Optional):
- Remove.bg - $0.02/image after free tier
- OpenAI - Pay-as-you-go
- Canva - May require Pro/Enterprise for API access
- DocSend - Contact for pricing

---

## ðŸŽ¯ Priority Order for Setup

1. **Day 1 - Get It Running:**
   - Google Drive OAuth
   - Slide template
   - Deploy to Railway/Render
   - Test basic slide generation

2. **Day 2 - Add Features:**
   - Gemini API key (for maps)
   - Canva OAuth (for Canva uploads)

3. **Day 3 - Polish:**
   - Background removal APIs
   - Notion integration
   - DocSend integration

---

This checklist covers **everything** needed to hand off the project. Use it as a reference during setup!

